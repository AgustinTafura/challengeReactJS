(this["webpackJsonpchallenge-reactjs"]=this["webpackJsonpchallenge-reactjs"]||[]).push([[0],{39:function(e,t,n){},42:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n.n(a),s=n(25),o=n.n(s),r=(n(39),n(40),n(31),n(32),n(42),n(17)),i=n(9),l=n.n(i),d=n(16),u=n.n(d),b=n(22),j=n(15),m=n(19),h=(n(44),n(46),n(47),m.a.initializeApp({apiKey:"AIzaSyCbQl3Ty2DTkB3RbzyhELFR031ZWfB_E2I",authDomain:"challenge-react-js.firebaseapp.com",projectId:"challenge-react-js",storageBucket:"challenge-react-js.appspot.com",messagingSenderId:"969799560938",appId:"1:969799560938:web:fb2aaf129d072fea293193",measurementId:"G-B096WNEXVM"}),m.a.auth());var g=n(14),p=n(1),O=Object(a.createContext)(),x=function(e){var t=e.children,n=Object(a.useState)(!1),c=Object(j.a)(n,2),s=c[0],o=c[1],r=Object(a.useState)(!1),i=Object(j.a)(r,2),l=i[0],d=i[1];Object(a.useEffect)((function(){h.onAuthStateChanged((function(e){e?(o(e),d(!0)):(o(!1),d(!1))}))}),[]);var x=function(){var e=Object(b.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new m.a.auth.FacebookAuthProvider,e.prev=1,e.next=4,h.signInWithPopup(t);case 4:d(!0),e.next=11;break;case 7:throw e.prev=7,e.t0=e.catch(1),"auth/account-exists-with-different-credential"===e.t0.code?h.fetchSignInMethodsForEmail(e.t0.email).then((function(e){var t=e.length>0&&"password"===e?"Try login with emila and password":"This email already exist in our database, try access with your ".concat(e," account");g.a.error(t,{position:"top-right"})})):g.a.error(e.t0.message,{position:"top-right"}),e.t0;case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}();return Object(p.jsx)(O.Provider,{value:{logInUser:function(e,t){return h.signInWithEmailAndPassword(e,t).then((function(e){d(!0)})).catch((function(t){switch(t.code){case"auth/user-not-found":Object(g.a)("No existen cuentas con \xe9ste email",{position:"top-right"});break;case"auth/wrong-password":h.fetchSignInMethodsForEmail(e).then((function(e){var t=e.length>0&&"password"===e?" Wrong password":"This email already exist in our database, try access with your ".concat(e," account");Object(g.a)(t,{position:"top-right"})}));break;case"auth/too-many-requests":default:Object(g.a)(t.message,{position:"top-right"})}throw t}))},logInWhitGoogle:function(){var e=new m.a.auth.GoogleAuthProvider;return h.signInWithPopup(e).then((function(e){d(!0)})).catch((function(e){throw"auth/account-exists-with-different-credential"===e.code?h.fetchSignInMethodsForEmail(e.email).then((function(e){var t=e.length>0&&"password"===e?"Try login with emila and password":"This email already exist in our database, try access with your ".concat(e," account");g.a.error(t,{position:"top-right"})})):(console.log("lolololo",e),g.a.error(e.message,{position:"top-right"})),e}))},logInWhitFacebook:x,createNewUserWithEmailAndPassword:function(e,t){return h.createUserWithEmailAndPassword(e,t).then((function(e){return e.user})).catch((function(t){throw"auth/email-already-in-use"===t.code?h.fetchSignInMethodsForEmail(e).then((function(e){var t=e.length>0&&"password"===e?"Try login with emila and password":"This email already exist in our database, try access with your ".concat(e," account");g.a.error(t,{position:"top-right"})})):g.a.error(t.message,{position:"top-right"}),t}))},user:s,logOutUser:function(){h.signOut().then(setTimeout((function(){g.a.success("Logout successful!",{position:"top-right"})}),1500)),d(!1)},isAuthenticated:l},children:t})},f=function(){var e=Object(a.useContext)(O).user;return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)("nav",{className:"navbar navbar-expand-md navbar-dark navbar-custom bg-warning",children:Object(p.jsxs)("div",{className:"container",children:[Object(p.jsx)(r.b,{className:"navbar-brand logo-image",to:"/",children:"Challenge"}),Object(p.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarsExampleDefault","aria-controls":"navbarsExampleDefault","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(p.jsx)("span",{className:"navbar-toggler-icon"})}),Object(p.jsx)("ul",{className:"navbar-nav ml-auto",children:e?Object(p.jsx)(p.Fragment,{children:Object(p.jsx)("li",{children:Object(p.jsx)("button",{className:"btn btn-dark m-1","data-toggle":"modal","data-target":"#logoutModal",children:"LOGOUT"})})}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("li",{className:"",children:Object(p.jsx)("button",{onClick:function(){l()("#signinModal").modal("show")},className:"btn btn-dark m-1","data-toggle":"modal","data-target":"#signinModal",children:"LOGIN"})}),Object(p.jsx)("li",{className:"",children:Object(p.jsx)("button",{className:"btn btn-dark m-1","data-toggle":"modal","data-target":"#signinModal",children:"REGISTER"})})]})})]})})})},v=n(4),y=Object(v.j)((function(e){var t=e.history,n=Object(a.useContext)(O),c=n.logInUser,s=n.createNewUserWithEmailAndPassword,o=n.logOutUser,r=n.logInWhitGoogle,i=n.logInWhitFacebook,d=Object(a.useState)({}),u=Object(j.a)(d,2),b=u[0],m=u[1],h=Object(v.h)(),g=function(e){if(!(e.value.trim().length>0))return e.classList.contains("notEmpty")&&e.classList.remove("notEmpty");m({}),!e.classList.contains("notEmpty")&&e.classList.add("notEmpty"),e.classList.add("notEmpty")};window.addEventListener("load",(function(){document.querySelector(".registerModal").addEventListener("click",(function(e){e.preventDefault(),e.stopImmediatePropagation(),l()("#signinModal").modal("hide"),l()("#signupModal").modal("show")})),document.querySelector(".loginModal").addEventListener("click",(function(e){e.preventDefault(),e.stopImmediatePropagation(),l()("#signupModal").modal("hide"),l()("#signinModal").modal("show")}));var e=document.querySelector("#signup-form");e.addEventListener("submit",(function(t){t.preventDefault(),t.stopImmediatePropagation();var n=e["signup-email"].value.toString(),a=e["signup-password"].value;s(n,a).then((function(t){l()("#signupModal").modal("hide"),e.reset()})).catch((function(e){m({email:"\xc9ste email ya esta en uso"})}))}));var n=document.querySelector("#login-form");n.addEventListener("submit",(function(e){e.preventDefault(),e.stopImmediatePropagation();var a=n["login-email"].value.toString(),s=n["login-password"].value;c(a,s).then((function(e){var a=h.pathname;n.reset(),l()("#signinModal").modal("hide"),"/"===a&&t.push("/")}))})),document.querySelectorAll(".googleLogin").forEach((function(e){e.addEventListener("click",(function(e){e.stopImmediatePropagation(),r().then((function(e){var a=h.pathname;n.reset(),l()("#signinModal").modal("hide"),"/"===a&&t.push("/")})).catch((function(e){return console.log("lalalalalala",e)}))}))})),document.querySelectorAll(".facebookLogin").forEach((function(e){e.addEventListener("click",(function(e){e.stopImmediatePropagation(),i().then((function(e){var a=h.pathname;n.reset(),l()("#signinModal").modal("hide"),console.log(e),"/"===a&&t.push("/")}))}))}))}));return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:"modal fade",id:"signupModal",tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:Object(p.jsx)("div",{className:"modal-dialog",children:Object(p.jsxs)("div",{className:"modal-content",children:[Object(p.jsxs)("div",{className:"modal-header",children:[Object(p.jsx)("h3",{children:"Create new account"}),Object(p.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:Object(p.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(p.jsx)("div",{className:"modal-body",children:Object(p.jsxs)("form",{id:"signup-form",children:[Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("input",{onFocus:function(e){return g(e.target)},onBlur:function(e){return g(e.target)},type:"email",className:"form-control-input ".concat(b.email?"notEmpty errorData":""," "),id:"signup-email",name:"email",required:!0}),Object(p.jsxs)("label",{className:"label-control",htmlFor:"email",children:["Email",b.email?Object(p.jsxs)("small",{className:"text-muted",children:[" -  ",b.email,"  "]}):null]})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("input",{onFocus:function(e){return e.target.classList.add("notEmpty")},onBlur:function(e){return g(e.target)},type:"password",className:"form-control-input",id:"signup-password",name:"password",minLength:"6",required:!0}),Object(p.jsxs)("label",{className:"label-control",htmlFor:"email",children:["Password",b.password?Object(p.jsxs)("small",{className:"text-muted",children:[" - ",b.password,"  "]}):null]})]}),Object(p.jsx)("button",{type:"submit",className:"btn-solid-lg btn-block",children:"Register"}),Object(p.jsx)("button",{type:"button",className:"btn-solid-lg btn-block googleLogin",children:"Access with Google"}),Object(p.jsx)("button",{type:"button",className:"btn-solid-lg btn-block facebookLogin",children:"Access with Facebook"}),Object(p.jsxs)("div",{className:"nav-item logged-out justify-content-center mt-2",children:[Object(p.jsx)("span",{children:"Already have an account?"})," ",Object(p.jsx)("a",{className:"loginModal mx-2",href:"/change",children:"Login"})]})]})})]})})}),Object(p.jsx)("div",{className:"modal fade",id:"signinModal",tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalSignin","aria-hidden":"true",children:Object(p.jsx)("div",{className:"modal-dialog",children:Object(p.jsxs)("div",{className:"modal-content",children:[Object(p.jsxs)("div",{className:"modal-header",children:[Object(p.jsx)("h3",{children:"Login"}),Object(p.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:Object(p.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(p.jsx)("div",{className:"modal-body",children:Object(p.jsxs)("form",{id:"login-form",children:[Object(p.jsx)("div",{className:"form-group",children:Object(p.jsxs)("label",{className:"label-control",htmlFor:"email",children:["Email",Object(p.jsx)("input",{onFocus:function(e){return g(e.target)},onBlur:function(e){return g(e.target)},type:"email",className:"form-control-input ".concat(b.email?"notEmpty errorData":""," "),id:"login-email",name:"email",required:!0})]})}),Object(p.jsx)("div",{className:"form-group",children:Object(p.jsxs)("label",{className:"label-control",htmlFor:"email",children:["Password",Object(p.jsx)("input",{onFocus:function(e){return e.target.classList.add("notEmpty")},onBlur:function(e){return g(e.target)},type:"password",className:"form-control-input",id:"login-password",name:"password",minLength:"6",required:!0})]})}),Object(p.jsx)("button",{type:"submit",className:"btn-solid-lg btn-block",children:"Login"}),Object(p.jsx)("button",{type:"button",className:"btn-solid-lg btn-block googleLogin",children:"Access with Google"}),Object(p.jsx)("button",{type:"button",className:"btn-solid-lg btn-block facebookLogin",children:"Access with Facebook"}),Object(p.jsxs)("div",{className:"nav-item logged-out justify-content-center ml-3 mt-2",children:[Object(p.jsx)("span",{children:"Don't have an account? "})," ",Object(p.jsx)("a",{className:"mx-2 registerModal",href:"/change",children:"Register"})]})]})})]})})}),Object(p.jsx)("div",{className:"modal fade",id:"logoutModal",tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:Object(p.jsx)("div",{className:"modal-dialog",role:"document",children:Object(p.jsxs)("div",{className:"modal-content",children:[Object(p.jsxs)("div",{className:"modal-header",children:[Object(p.jsx)("h5",{className:"modal-title",id:"exampleModalLabel",children:"Are you sure?"}),Object(p.jsx)("button",{className:"close",type:"button","data-dismiss":"modal","aria-label":"Close",children:Object(p.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(p.jsxs)("div",{className:"modal-footer",children:[Object(p.jsx)("button",{className:"btn-solid-lg btn-light",type:"button","data-dismiss":"modal",children:"Cancel"}),Object(p.jsx)("div",{onClick:function(){o(),l()("#logoutModal").modal("hide"),t.push("/")},className:"btn-solid-lg ",id:"logOutButton",children:"Logout"})]})]})})})]})})),N=function(){var e=Object(a.useContext)(O).user;return Object(p.jsx)(p.Fragment,{children:e?Object(p.jsx)(r.b,{to:"/bands",children:"GET BANDS"}):Object(p.jsx)("h4",{children:"Loggin to Access"})})},w=n(20),k=Object(a.createContext)(),E=function(e){var t=e.children,n=Object(a.useState)([]),c=Object(j.a)(n,2),s=c[0],o=c[1],r=Object(a.useState)([]),i=Object(j.a)(r,2),l=i[0],d=i[1],m=Object(a.useState)([]),h=Object(j.a)(m,2),g=h[0],x=h[1],f=Object(a.useContext)(O).user;function v(){return(v=Object(b.a)(u.a.mark((function e(){var t,n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://my-json-server.typicode.com/improvein/dev-challenge/genre").then((function(e){return e.json()})).catch((function(e){return console.log(e)}));case 2:return t=e.sent,e.next=5,fetch("https://my-json-server.typicode.com/improvein/dev-challenge/albums").then((function(e){return e.json()})).catch((function(e){return console.log(e)}));case 5:return n=e.sent,e.next=8,fetch("https://my-json-server.typicode.com/improvein/dev-challenge/bands").then((function(e){return e.json()})).then(function(){var e=Object(b.a)(u.a.mark((function e(a){var c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(a.map(function(){var e=Object(b.a)(u.a.mark((function e(a){var c,s,o,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.find((function(e){return e.code===a.genreCode})),s=n.filter((function(e){return e.bandId===a.id})),o=void 0===c?"no data":c.name,r=0===s.length?"no data":s,e.abrupt("return",Object(w.a)(Object(w.a)({},a),{},{genre:o,albums:r}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:return c=e.sent,console.log(c),e.abrupt("return",c);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.log(e)}));case 8:a=e.sent,d(n),o(a),x(t);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){f&&function(){v.apply(this,arguments)}()}),[f]),Object(p.jsx)(k.Provider,{value:{bands:s,setBands:o,albums:l,setAlbums:d,genres:g},children:t})},L=(n(53),function(){var e=Object(v.g)(),t=Object(v.i)().id,n=Object(a.useContext)(k),c=n.bands,s=n.genres,o=Object(a.useState)([]),i=Object(j.a)(o,2),l=i[0],d=i[1];return Object(a.useEffect)((function(){console.log(c),console.log(Object.keys(c)),console.log(Object.values(c)),d(t?c.filter((function(e){return e.id===t})):c)}),[c,t]),0===l.length?Object(p.jsxs)("div",{className:"loadingComponent",children:[Object(p.jsx)("p",{children:" Loading "}),Object(p.jsx)("div",{className:"spinner-grow bounce1",role:"status",children:Object(p.jsx)("span",{className:"sr-only"})}),Object(p.jsx)("div",{className:"spinner-grow bounce2",role:"status",children:Object(p.jsx)("span",{className:"sr-only"})}),Object(p.jsx)("div",{className:"spinner-grow bounce3",role:"status",children:Object(p.jsx)("span",{className:"sr-only"})})]}):Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("main",{children:[Object(p.jsx)("div",{children:t?Object(p.jsx)("button",{onClick:function(){return e.goBack()},className:"btn btn-dark m-2",children:"back"}):Object(p.jsxs)(p.Fragment,{children:["  ",Object(p.jsxs)("div",{children:[Object(p.jsx)("label",{className:"ml-5",htmlFor:"",children:"Filter"}),Object(p.jsxs)("select",{className:"m-1 mt-4",onChange:function(e){return function(e){var t=e.target.value,n=c.filter((function(e){return e.genreCode===t}));d(t?n:c)}(e)},children:[Object(p.jsx)("option",{value:"",children:"all"}),s.map((function(e,t){return Object(p.jsx)("option",{value:e.code,children:e.name},t)}))]})]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("label",{className:"ml-5",htmlFor:"",children:"Sort by Names"}),Object(p.jsxs)("select",{className:"m-1 mb-5",onChange:function(e){return function(e){var t=e.target.value;t&&d("asc"===t?Object.values(c).sort((function(e,t){return e.namie>t.namie?1:t.name>e.name?-1:0})):Object.values(c).sort((function(e,t){return e.namie<t.namie?1:t.name<e.name?-1:0})))}(e)},children:[Object(p.jsx)("option",{value:""}),Object(p.jsx)("option",{value:"asc",children:"Asc"}),Object(p.jsx)("option",{value:"des",children:"Des"})]})]})]})}),Object(p.jsx)("div",{className:"container",children:l.map((function(e,n){return Object(p.jsxs)("div",{children:[Object(p.jsxs)("span",{children:[" ",Object(p.jsx)(r.b,{to:"/bands/".concat(e.id),children:Object(p.jsx)("b",{children:e.name})}),"  "]})," - ",Object(p.jsx)("span",{children:e.genre}),t&&Object(p.jsxs)("ul",{children:[Object(p.jsxs)("li",{children:["Country: ",e.country]}),Object(p.jsxs)("li",{children:["Members:",Object(p.jsx)("ul",{children:e.members.map((function(e,t){return Object(p.jsx)("li",{children:e.name},t)}))})]})]})]},n)}))})]})})}),I=n(30),F=["component"],M=["component"],C=function(e){var t=e.component,n=Object(I.a)(e,F);return Object(p.jsx)(v.b,Object(w.a)(Object(w.a)({},n),{},{component:t}))},S=function(e){var t=e.component,n=Object(I.a)(e,M);return Object(a.useContext)(O).isAuthenticated?Object(p.jsx)(v.b,Object(w.a)(Object(w.a)({},n),{},{component:t})):Object(p.jsx)(v.a,{to:{pathname:"/"}})},A=function(){var e=Object(a.useContext)(O).isAuthenticated;return Object(p.jsxs)(v.d,{children:[Object(p.jsx)(C,{exact:!0,path:"/",component:N}),e&&Object(p.jsx)(S,{exact:!0,path:"/bands/:id?",children:Object(p.jsx)(L,{})})]})};var P=function(){return Object(p.jsxs)("div",{className:"App",children:[Object(p.jsx)(r.a,{basename:"/challengeReactJS",children:Object(p.jsx)(x,{children:Object(p.jsxs)(E,{children:[Object(p.jsx)(f,{}),Object(p.jsx)(y,{}),Object(p.jsx)(A,{})]})})}),Object(p.jsx)("header",{})]})},T=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,55)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,s=t.getLCP,o=t.getTTFB;n(e),a(e),c(e),s(e),o(e)}))};o.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(P,{})}),document.getElementById("root")),T()}},[[54,1,2]]]);
//# sourceMappingURL=main.3f819870.chunk.js.map